{
    "collab_server" : "",
    "contents" : "\n\n# master script to reproduce full analysis (runs scripts in the right order)\n  # IHME location setwd('/home/j/temp/geospatial/U5M_africa') setwd('J:/temp/geospatial/U5M_africa')\n# should be run from the top of the U5M_africa directory so that the relative file paths work\n\n# ~~~~~~~~\n\n# load miscellaneous project functions\nsource('code/functions.R')\n\n# start logging the run\n#startLog() \n\n# set global variables for final model run\ndefaultOptions(resolution = 5,        # raster resolution\n               country = '',       # MOZ. if there is a 3 letter ISO here, the analysis will be run only on that country\n               location = 'seattle',  # location for final run \n               cores = 30,            # number of cores to use\n               full = FALSE,           # whether to do a full run\n               age_bins = c(1,2,3,4,6),        # which age bins to run models for\n               spacetime = TRUE,      # whether to do space-time inference\n               sbh_variance = TRUE,   # whether to incorporate variance in SBH estimate\n               champs_experiment = FALSE, # If true, will save outputs elsewhere\n               ce_holdout = FALSE,    # Only applicable if ce is true, will hold out data\n               validation = F,    # if true, will run 5-fold cross-validation instead of full moel\n               start = Sys.time())    # start time\n\n\n\n\n# check all input data and output directories are present\n#source('code/check_data.R')\n\n# install required R packages\n#source('code/install_packages.R')\n\n# get simple Africa shapefile and admin units\n#source('code/sort_admin_polygons.R')\n\n# get and sort out covariates\n#source('code/sort_covs.R')\n\n# create admin rasters\n#source('code/create_admin_rasters.R')\n\n# sort all data into nice dataframes\n#source('code/preprocess_mortality_data.R')\n\n # if option is marked, identify folds for validation.\n # source('code/identify_folds.R')\n\n# convert polygons into representative sets of points\n#source('code/process_polygons.R')\n\n# select and transform continuous covariates\n#source('code/select_transform_clamp_covariates.R')\n\n# get and sort out GBD national-level rates covariates\n#source('code/sort_trend_covariates.R')\n\n# build meshes for the GMRF approximation\n#source('code/build_meshes.R')\n\n# run the models\n\n### FOR MOZ - RUN MODELS HOLDING OUT LAST SURVEY.. \n\nsource('code/run_MBG.R')\nif(getOption('location')=='seattle') stop('Make Sure the Jobs have completed before continuing \\n\n                                          Note to Roy - build in a check for them being written \\n\n                                          later so we dont have to have it stop like this')\n\n\n\n\n\n# combine results and do conditional simulation\n#source('code/combine_predictions.R')\n\n# plot conditional simulation results (national rates and inequality)\n#source('code/compare_national_estimates.R')\n\n# plot combined results\n#source('code/plot_predictions.R')\n\n# report the mena of the prior on the intercept term\n#source('code/report_intercept_prior_means.R')\n\n# stop logging\n",
    "created" : 1460665126391.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1843916198",
    "id" : "4FED6884",
    "lastKnownWriteTime" : 1460414122,
    "last_content_update" : 1460414122,
    "path" : "J:/temp/geospatial/U5M_africa/code/master.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}